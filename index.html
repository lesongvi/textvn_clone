<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Stylesheet -->
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans:400,700" rel="stylesheet">
    <link href="/guesssys.css" rel="stylesheet">
    <link href="/mai-global.css" rel="stylesheet">
    <link href="/toast.jquery.css" rel="stylesheet">
    <link href="//cdnjs.cloudflare.com/ajax/libs/normalize/6.0.0/normalize.min.css" rel="stylesheet" media="screen" type="text/css">
    <link href="//cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/AlertifyJS/1.11.0/css/alertify.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/AlertifyJS/1.11.0/css/themes/default.min.css">
    
    <!-- Script -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>
    var tabLink = window.location.pathname;
    document.title = window.location.hostname;
    function makeid(length = 8) {
       var result           = '';
       var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
       var charactersLength = characters.length;
       for ( var i = 0; i < length; i++ ) {
          result += characters.charAt(Math.floor(Math.random() * charactersLength));
       }
       return result;
    }
    function validLink(Tab) {
            var pattern = new RegExp('(([a-z\\d]([a-z\\d-]*[a-z\\d])*))');
            return pattern.test(Tab);
    }
    setTimeout(function() {
        if(!validLink(tabLink)){
            window.location.href = window.location.protocol + '//' + window.location.hostname + "/" + makeid();
        }
    }, 500);
    setTimeout(function() {
        var e = (t = $(".textarea")).val().match(/\S+/g);
        $(".word_count").html(e.length);
    }, 2e3);
    $(document).ready(function() {
        $(window).on("load resize", function() {
            var e = .6 * $(window).height(),
                t = .2 * $(window).height() / 4;
            $(".textarea").height(e), $(".container").css({
                margin: t + "px auto 0"
            })
        });
        var timer = null;
        $.get( 'https://api.rqn9.com/data/1.0/textvn/38b1c18f052c4878b6443a0fead0bd9e' + tabLink, function(data) {
                var textvnApi = jQuery.parseJSON(data).response;
                if (textvnApi.status == 'success'){
                    $(".textarea").val(textvnApi.message);
                } else {
                    alert('Hiện tính năng này đang được phát triển, vui lòng quay lại sau.');
                    window.location.href = window.location.protocol + '//' + window.location.hostname;
                }
            });
        $('.textarea').keydown(function(){
               clearTimeout(timer); 
               timer = setTimeout(Tabsave, 1000)
        });
        $('.textarea').focus(function() {
              $('.updated').removeClass('color');
        });
        function Tabsave(){
            console.log($('.textarea').val());
            var tabdata = $('.textarea').val();
            $.get('https://api.rqn9.com/data/1.0/textvn/38b1c18f052c4878b6443a0fead0bd9e' + tabLink + '&data=' + encodeURI(tabdata), function(data) {
                var textvnApi = jQuery.parseJSON(data).response;
                if (textvnApi.status == 'error'||textvnApi.message == 'password protected'){
                        alert('Đã có lỗi xảy ra, dữ liệu của bạn không được lưu.');
                }
                $('.updated').addClass('color');
            });
        }
        function copyToClipboard(text) {
            var $temp = $("<input>");
            $("body").append($temp);
            $temp.val(text).select();
            document.execCommand("copy");
            $temp.remove()
        }
        $('#share-link').click(function() {
            copyToClipboard(window.location.protocol + '//' + window.location.hostname + window.location.pathname)
        });
        $(selector).animate({
            opacity: 1
        }, function() {
            $(this).get(0).style.removeAttribute('filter')
        });
    });
    </script>
</head>
<body>
    <div class="wrap">
        
        <div class="nav">
    <div class="fl-left"> <span class="logo"><b>highlands</b>.cf</span> <span class="updated"><i class="ion-checkmark"></i></span> </div>
    <div class="fl-right">
        <div class="options">
            <a href="/" class="menu-item" title="Mở tab mới"> <i class="ion-plus"></i> </a>
        </div>
    </div>
    <div class="clear"></div>
</div>
        
       <div class="major-wrap" id="content">
           <div class="note-tabs-scroll-container" style="display: none;">
                <div class="note-tabs-scroll">
                    <div id="note-tabs-container">
                        <div id="note-tabs">
                            <div class="tab selected" id="tab_1"> <span class="unsaved-indicator"></span>
                                <input type="text" class="tab-title" style="display: none;" disabled="disabled"> <i class="fa fa-close"></i> </div>
                            <div class="tab" id="tab_2"> <span class="unsaved-indicator"></span>
                                <input type="text" class="tab-title" style="display: none;" disabled="disabled"> <i class="fa fa-close"></i> </div>
                            <div class="tab" id="tab_3"> <span class="unsaved-indicator"></span>
                                <input type="text" class="tab-title" style="display: none;" disabled="disabled"> <i class="fa fa-close"></i> </div>
                        </div>
                        <div id="tab-template" class="none">
                            <div class="tab"> <span class="unsaved-indicator"></span>
                                <input type="text" class="tab-title" style="display: none;"> <i class="fa fa-close"></i> </div>
                        </div>
                    </div>
                </div>
                <div id="note-tab-add" class="note-tab-add" style="top: 0px; right: 0px;"> <i class="fa fa-plus"></i> </div>
            </div>
            <textarea id="note-data" class="textarea" placeholder="" style="font-size: 15px; height: 293.6px; font-family: Arial, Helvetica, sans-serif;" allow-tab="" open-url="" character-count=""> </textarea>
        <div class="footer">
    <button class="share-copy share-url" title="Chép liên kết chia sẽ" id="share-link"><span><i class="ion-link"></i> Chia sẽ</span> </button>
</div>
    </div> 
    
    <div class="sub-footer text-center">
    <div>
        <h3>Version with more features: <a href="https://textvn.com">Textvn.com</a></h3> <small><b>Từ:</b> <span class="word_count">0</span></small> | <small><b>Lượt xem:</b> 0</small></div>
    <br><b><a target="_blank" href="https://textvn.com/chinh-sach-bao-mat">Chính sách </a></b><i class="ion-ios-minus-empty"></i><b><a target="_blank" href="https://textvn.com/lien-he"> Liên hệ </a></b><i class="ion-ios-minus-empty"></i> <b>highlands</b>.cf </div>
  </div>
</body>
</html>
